{% load i18n %}
{% load crud_tags %}
{% load django_tables2 %}
{% load sweetify %}
{% sweetify %}
<div class="row">
    <div class="col-12">
        <div id="id_{{ inline.name }}_swap" class="shadow border dark:border border-gray-200 sm:rounded-lg max-h-[650px]" style="height: inherit;">
            {% render_table table %}
        </div>
    </div>
</div>


{#<div class="modal in" id="delete_modal" tabindex="-1" role="dialog">#}
{#  <div class="modal-dialog" role="document">#}
{#    <div class="modal-content" id="delete_modal_inner">#}
{#    </div>#}
{#  </div>#}
{#</div>#}

{#<div class="modal in" id="edit_modal" tabindex="-1" role="dialog">#}
{#  <div class="modal-dialog" style="max-width: 800px" role="document">#}
{#    <div class="modal-content" id="edit_modal_inner">#}
{#    </div>#}
{#  </div>#}
{#</div>#}

<script>
    document.querySelectorAll("a.delete_href").forEach((ref) => {
        ref.addEventListener("click", function (e) {
            e.preventDefault()
            let record = "\n" + e.target.parentElement.attributes['is'].nodeValue
            swal.fire({
                title: '¿Está seguro que desea eliminar este elemento: ' + record + '?',
                text: '¡Esta acción no podrá revertirse!',
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Confirmar Eliminar',
                cancelButtonText: 'Cancelar',
                backdrop: true,
                allowOutsideClick:()=>false,
                allowEscapeKey:()=>false
            }).then(function(result) {
                  if(result.isConfirmed) {
                      // e.detail.issueRequest(true) // use true to skip window.confirm
                      htmx.trigger(e.target, 'inline_confirmed')
                  }
            })
        })
    })
</script>
